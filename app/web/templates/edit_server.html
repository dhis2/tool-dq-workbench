{% extends "layout.html" %}

{% block content %}
{% include "partials/_flashes.html" %}
  <h1>Edit Server Configuration</h1>

  <form method="post">
    <div class="mb-3">
      <label class="form-label" for="base_url">Base URL</label>
      <input class="form-control" id="base_url" name="base_url" value="{{ server.base_url }}">
    </div>
<div class="mb-3">
  <label class="form-label" for="d2_token">API Token</label>
  <input class="form-control" id="d2_token" name="d2_token" placeholder="Enter new token (leave blank to keep existing)" type="password">
</div>

    <div class="mb-3">
      <label class="form-label" for="logging_level">Logging Level</label>
      <select class="form-select" id="logging_level" name="logging_level">
        {% for level in ['DEBUG', 'INFO', 'WARNING', 'ERROR'] %}
          <option value="{{ level }}" {% if server.logging_level == level %}selected{% endif %}>{{ level }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label" for="max_concurrent_requests">Max Concurrent Requests</label>
      <input class="form-control" id="max_concurrent_requests" name="max_concurrent_requests" type="number" value="{{ server.max_concurrent_requests }}">
    </div>
    <div class="mb-3">
      <label class="form-label" for="max_results">Max Results</label>
      <input class="form-control" id="max_results" name="max_results" type="number" value="{{ server.max_results }}">
    </div>
      <div class="mb-3">
          <label class="form-label" for="min_max_bulk_api_disabled">Disable bulk MinMax API</label>
            <select class="form-select" id="min_max_bulk_api_disabled" name="min_max_bulk_api_disabled">
                <option value="true" {% if server.min_max_bulk_api_disabled %}selected{% endif %}>Yes</option>
                <option value="false" {% if not server.min_max_bulk_api_disabled %}selected{% endif %}>No</option>
            </select>
        </div>
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn btn-secondary" href="{{ url_for('ui.index') }}">Cancel</a>
  </form>
{% endblock %}
