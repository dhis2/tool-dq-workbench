<script>
  document.addEventListener("DOMContentLoaded", function () {
      const vrgEl = document.getElementById("validation_rule_groups");
    if (!vrgEl) return;
  new TomSelect(vrgEl, {
    valueField: "id",
    labelField: "text",
    searchField: "text",
    load: function(query, callback) {
      if (query.length < 3) return callback();
      fetch(`/api/validation-rule-groups?q=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(callback)
        .catch(() => callback());
    },
    preload: true,
    {% if stage.params.validation_rule_groups %}
    items: ["{{ stage.params.validation_rule_groups }}"],
    {% endif %}
  });
      });
</script>